{"id":"node_modules/@vibrant/core/lib/pipeline/worker/client.js","dependencies":[{"name":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/core/lib/pipeline/worker/client.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/christianreindl/Code/fenwick-ui/package.json","includedInParent":true,"mtime":1628308770203},{"name":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/core/package.json","includedInParent":true,"mtime":499162500000},{"name":"@vibrant/worker","loc":{"line":7,"column":39},"parent":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/core/lib/pipeline/worker/client.js","resolved":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/worker/lib/index.js"},{"name":"@vibrant/color","loc":{"line":8,"column":22},"parent":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/core/lib/pipeline/worker/client.js","resolved":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/color/lib/index.js"},{"name":"../../utils","loc":{"line":9,"column":22},"parent":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/core/lib/pipeline/worker/client.js","resolved":"/Users/christianreindl/Code/fenwick-ui/node_modules/@vibrant/core/lib/utils.js"}],"generated":{"js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerPipeline = void 0;\nvar worker_1 = __importDefault(require(\"@vibrant/worker\"));\nvar color_1 = require(\"@vibrant/color\");\nvar utils_1 = require(\"../../utils\");\n/**\n * Client side (runs in UI thread)\n */\nvar WorkerPipeline = /** @class */ (function () {\n    function WorkerPipeline(PipelineWorker) {\n        this.PipelineWorker = PipelineWorker;\n        this._manager = new worker_1.default();\n        this._manager.register('pipeline', PipelineWorker);\n    }\n    WorkerPipeline.prototype._rehydrate = function (result) {\n        var colors = result.colors, palettes = result.palettes;\n        result.colors = colors.map(function (s) { return color_1.Swatch.clone(s); });\n        result.palettes = utils_1.mapValues(palettes, function (p) { return utils_1.mapValues(p, function (c) { return c ? color_1.Swatch.clone(c) : null; }); });\n        return result;\n    };\n    WorkerPipeline.prototype.process = function (imageData, opts) {\n        var _this = this;\n        return this._manager.invokeWorker('pipeline', [imageData, opts], [imageData.data.buffer])\n            .then(function (result) { return _this._rehydrate(result); });\n    };\n    return WorkerPipeline;\n}());\nexports.WorkerPipeline = WorkerPipeline;\n"},"sourceMaps":{"js":{"version":3,"file":"client.js","sourceRoot":"","sources":["../../../../../../packages/vibrant-core/src/pipeline/worker/client.ts"],"names":[],"mappings":";;;;;;AACA,2DAAgE;AAChE,wCAAgD;AAChD,qCAAuC;AAEvC;;GAEG;AACH;IAEE,wBAAuB,cAA+B;QAA/B,mBAAc,GAAd,cAAc,CAAiB;QAD9C,aAAQ,GAAG,IAAI,gBAAa,EAAE,CAAA;QAEpC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,EAAE,cAAc,CAAC,CAAA;IACpD,CAAC;IACO,mCAAU,GAAlB,UAAoB,MAAqB;QACjC,IAAA,MAAM,GAAe,MAAM,OAArB,EAAE,QAAQ,GAAK,MAAM,SAAX,CAAW;QACjC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,OAAA,cAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAf,CAAe,CAAC,CAAA;QAElD,MAAM,CAAC,QAAQ,GAAG,iBAAS,CAAC,QAAQ,EAAE,UAAC,CAAC,IAAK,OAAA,iBAAS,CAAC,CAAC,EAAE,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,CAAC,CAAC,cAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAA1B,CAA0B,CAAY,EAA1D,CAA0D,CAAC,CAAA;QACxG,OAAO,MAAM,CAAA;IACf,CAAC;IACD,gCAAO,GAAP,UAAS,SAAoB,EAAE,IAAoB;QAAnD,iBAGC;QAFC,OAAO,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACtF,IAAI,CAAC,UAAC,MAAM,IAAK,OAAA,KAAI,CAAC,UAAU,CAAC,MAAuB,CAAC,EAAxC,CAAwC,CAAC,CAAA;IAC/D,CAAC;IACH,qBAAC;AAAD,CAAC,AAhBD,IAgBC;AAhBY,wCAAc","sourcesContent":[null]}},"error":null,"hash":"4ee3340873948c0f40827911a3502773","cacheData":{"env":{}}}